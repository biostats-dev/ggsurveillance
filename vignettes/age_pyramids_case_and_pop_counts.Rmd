---
title: "Age pyramids for case and population counts"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Age pyramids for case and population counts}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  warning = FALSE,
  message = FALSE,
  fig.width = 7,
  fig.height = 4
)
```

```{r setup, echo = FALSE}
library(ggplot2)
library(dplyr)
library(tidyr)
library(ggsurveillance)
```

## Age pyramids

### Age pyramid of the populations of German states

```{r}
population_german_states |>
  filter(state %in% c("Berlin", "Mecklenburg-Vorpommern"), age < 90) |>
  ggplot(aes(y = age, fill = sex, weight = n)) +
  geom_bar_diverging(width = 1) +
  geom_vline(xintercept = 0) +
  scale_x_continuous_diverging(n.breaks = 10) +
  facet_wrap(~state, scales = "free_x") +
  theme_bw() +
  theme_mod_legend_bottom()
```
